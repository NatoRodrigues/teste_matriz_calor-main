<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heatmap Example</title>
    <!-- Inclua a biblioteca Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Inclua a biblioteca Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="style.css"> <!-- Inclua o arquivo CSS -->
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1>Heatmap Example</h1>
        </div>
    </nav>

    <div id="myChart" class="chart-container"></div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Heatmap Example. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // Função para atualizar o heatmap com os dados recebidos
        function updateHeatmap(data) {
            var xLabels = ['Coluna 1', 'Coluna 2', 'Coluna 3', 'Coluna 4', 'Coluna 5', 'Coluna 6', 'Coluna 7', 'Coluna 8'];
            var yLabels = ['Linha 1', 'Linha 2', 'Linha 3', 'Linha 4', 'Linha 5', 'Linha 6', 'Linha 7', 'Linha 8'];

            // Definir os dados do heatmap
          var heatmapData = [{
            x: xLabels,
            y: yLabels,
            z: data,
            type: 'heatmap',
            colorscale: 'Viridis',
            zsmooth: 'best', // Suavizar a visualização do heatmap
            zhoverformat: '.2f', // Formatar o valor ao passar o mouse sobre o heatmap
            colorbar: { // Configurações da barra de cores
                title: 'Temperatura', // Título da barra de cores
                titleside: 'right' // Posição do título da barra de cores
            }
        }];

            // Definir o layout
            var layout = {
                title: 'Heatmap Example',
                xaxis: {
                    title: 'Colunas'
                },
                yaxis: {
                    title: 'Linhas'
                }
            };

            // Plotar o heatmap
            Plotly.newPlot('myChart', heatmapData, layout);
        }

        // Função para fazer a requisição AJAX ao servidor PHP usando Axios
        function requestDataFromServer() {
            axios.get('backend.php')
                .then(response => {
                    console.log('Dados recebidos:', response.data); // Verifique os dados recebidos no console
                    updateHeatmap(response.data);
                })
                .catch(error => {
                    console.error('Erro:', error);
                });
        }

        // Atualizar o heatmap periodicamente
        setInterval(requestDataFromServer, 5000); // A cada 5 segundos (5000 milissegundos)
    </script>
</body>
</html>
